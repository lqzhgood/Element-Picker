"use strict";function _instanceof(left,right){if(right!=null&&typeof Symbol!=="undefined"&&right[Symbol.hasInstance]){return!!right[Symbol.hasInstance](left)}else{return left instanceof right}}function _classCallCheck(instance,Constructor){if(!_instanceof(instance,Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}window.Picker=function(){function Picker(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Picker);this.elm=options.elm||document.querySelector('body');this.mode=options.mode||'target';this.excludeElmName=options.excludeElmName||[];this.switch=typeof options.switch==='boolean'?options.switch:true;this.events=options.events||[];this.onInit=options.onInit;this.onClick=options.onClick?options.onClick.bind(this):null;this.onHover=options.onHover?options.onHover.bind(this):null;this.fn_bind_clickHandle=null;this.fn_bind_hoverHandle=null;this.fn_bind_contextmenuHandle=null;this._init()}_createClass(Picker,[{key:"on",value:function on(){this.switch=true}},{key:"off",value:function off(){this.switch=false;this._removeTargetShowPos();this._removeCoverShowPos()}},{key:"changeMode",value:function changeMode(mode){var modeArr=['cover','target'];if(modeArr.includes(mode)){this.mode=mode;this._removeTargetShowPos();this._removeCoverShowPos()}else{console.error("Mode error, only includes [ ".concat(modeArr.join(" | ")," ]"))}}},{key:"destroy",value:function destroy(){var _this=this;this.events.forEach(function(eo){eo.fn_bind=eo.fn.bind(_this);_this.elm.removeEventListener(eo.key,_this["_".concat(eo.key,"_Handle")],false)});this.elm.removeEventListener('mouseover',this.fn_bind_hoverHandle,false);this.elm.removeEventListener('click',this.fn_bind_clickHandle,false);this._removeTargetShowPos();document.querySelector("#_picker_cover_wrap_box").remove()}},{key:"_init",value:function _init(){var wrapDom=document.createElement('div');wrapDom.setAttribute("id","_picker_cover_wrap_box");wrapDom.innerHTML='<svg></svg>';document.body.appendChild(wrapDom);this._initEvent();this.onInit&&this.onInit()}},{key:"_initEvent",value:function _initEvent(){var _this2=this;this.events.forEach(function(eo){_this2["_".concat(eo.key,"_Handle")]=function(event){if(_this2._triggerEvent(event)===false)return;eo.fn&&eo.fn(event)};eo.fn_bind=_this2["_".concat(eo.key,"_Handle")].bind(_this2);_this2.elm.addEventListener(eo.key,_this2["_".concat(eo.key,"_Handle")],false)});this.fn_bind_hoverHandle=this._hoverHandle.bind(this);this.fn_bind_clickHandle=this._clickHandle.bind(this);this.elm.addEventListener('mouseover',this.fn_bind_hoverHandle,false);this.elm.addEventListener('click',this.fn_bind_clickHandle,false)}},{key:"_triggerEvent",value:function _triggerEvent(event){var tipsDom=document.querySelector("#_pick_tips_content");if(this.switch&&!this.excludeElmName.includes(event.target.localName.toLocaleLowerCase())&&!(tipsDom?tipsDom.contains(event.target):0)){event.stopPropagation();event.preventDefault();return true}else{return false}}},{key:"_hoverHandle",value:function _hoverHandle(event){if(this._triggerEvent(event)===false)return;switch(this.mode){case'cover':this._coverShowPos(event);break;case'target':this._targetShowPos(event);break}this.onHover&&this.onHover(event)}},{key:"_clickHandle",value:function _clickHandle(event){if(this._triggerEvent(event)===false)return;this.onClick&&this.onClick(event)}},{key:"_targetShowPos",value:function _targetShowPos(event){this._removeTargetShowPos();if(event.target.localName==='body')return;event.target.classList.add("_picker_target_elm")}},{key:"_removeTargetShowPos",value:function _removeTargetShowPos(){document.querySelectorAll("._picker_target_elm").forEach(function(elm){elm.classList.remove("_picker_target_elm")})}},{key:"_coverShowPos",value:function _coverShowPos(event){var elm=event.target;var W_W=window.screen.availWidth;var W_H=window.screen.availHeight;var pos=elm.getBoundingClientRect();var p={tX:pos.left>0?pos.left:0,tY:pos.top>0?pos.top:0,w:pos.right-pos.left,h:pos.bottom-pos.top};var path_W="M 0 0 h ".concat(W_W," v ").concat(W_H," h -").concat(W_W," Z");var path_box="M ".concat(p.tX," ").concat(p.tY," h ").concat(p.w," v ").concat(p.h," h -").concat(p.w," Z");var elm_path1="<path d=\"".concat(path_W," ").concat(path_box,"\"></path>");var elm_path2="<path d=\"".concat(path_box,"\"></path>");document.querySelector("#_picker_cover_wrap_box svg").innerHTML=elm_path1+elm_path2}},{key:"_removeCoverShowPos",value:function _removeCoverShowPos(){document.querySelector("#_picker_cover_wrap_box svg").innerHTML=''}}]);return Picker}();